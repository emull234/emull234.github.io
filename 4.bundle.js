(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{0:function(e,t,r){"use strict";t.a={BASE_URL:"https://restaurant-api.dicoding.dev",BASE_IMAGE_URL:"https://restaurant-api.dicoding.dev/images/small",API_KEY:"12345",DATABASE_NAME:"restaurant-catalogue-database",DATABASE_VERSION:1,OBJECT_STORE_NAME:"restaurants"}},13:function(e,t,r){"use strict";var n=r(9);function a(e,t,r,n,a,u,i){try{var o=e[u](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,u){var i=e.apply(t,r);function o(e){a(i,n,u,o,c,"next",e)}function c(e){a(i,n,u,o,c,"throw",e)}o(void 0)}))}}var i={init:function(e){var t=this;return u(regeneratorRuntime.mark((function r(){var n,a,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.likeButtonContainer,a=e.favoriteRestaurants,u=e.restaurant,t._likeButtonContainer=n,t._restaurant=u,t._favoriteRestaurants=a,r.next=6,t._renderButton();case 6:case"end":return r.stop()}}),r)})))()},_renderButton:function(){var e=this;return u(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._restaurant.id,t.next=3,e._isRestaurantExist(r);case 3:if(!t.sent){t.next=7;break}e._renderLiked(),t.next=8;break;case 7:e._renderLike();case 8:case"end":return t.stop()}}),t)})))()},_isRestaurantExist:function(e){var t=this;return u(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._favoriteRestaurants.getRestaurant(e);case 2:return n=r.sent,r.abrupt("return",!!n);case 4:case"end":return r.stop()}}),r)})))()},_renderLiked:function(){var e=this;this._likeButtonContainer.innerHTML=Object(n.createUnlikRestaurantButtonTemplate)(),document.querySelector("#likeButton").addEventListener("click",u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._favoriteRestaurants.deleteRestaurant(e._restaurant.id);case 2:e._renderButton();case 3:case"end":return t.stop()}}),t)}))))},_renderLike:function(){var e=this;this._likeButtonContainer.innerHTML=Object(n.createLikeRestaurantButtonTemplate)(),document.querySelector("#likeButton").addEventListener("click",u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._favoriteRestaurants.putRestaurant(e._restaurant);case 2:e._renderButton();case 3:case"end":return t.stop()}}),t)}))))}};t.a=i},23:function(e,t,r){"use strict";r.r(t),t.default=r.p+"397050f8909aea62dd98c09b2cd4f924.jpg"},24:function(e,t,r){"use strict";r.r(t),t.default=r.p+"441e5a3e096a248c6622a2e67d1f8db0.jpg"},3:function(e,t,r){"use strict";var n=r(0),a={LIST:"".concat(n.a.BASE_URL,"/list"),DETAIL:function(e){return"".concat(n.a.BASE_URL,"/detail/").concat(e)},REVIEW:"".concat(n.a.BASE_URL,"/review")};function u(e,t,r,n,a,u,i){try{var o=e[u](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){u(i,n,a,o,c,"next",e)}function c(e){u(i,n,a,o,c,"throw",e)}o(void 0)}))}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,u,c,s,f;return t=e,r=null,u=[{key:"getListCatalog",value:(f=i(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.LIST);case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r.restaurants);case 7:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)})},{key:"getDetailCatalog",value:(s=i(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.DETAIL(t));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n.restaurant);case 7:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"addReviewer",value:(c=i(regeneratorRuntime.mark((function e(t){var r,u,i,o,c,s,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,u=t.name,i=t.review,o={id:r,name:u,review:i},c={method:"POST",header:{"X-Auth-Token":n.a.API_KEY},body:new URLSearchParams(o)},e.next=5,fetch(a.REVIEW,c);case 5:return s=e.sent,e.next=8,s.json();case 8:return f=e.sent,e.abrupt("return",f);case 10:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})}],r&&o(t.prototype,r),u&&o(t,u),e}();t.a=c},36:function(e,t,r){"use strict";r.r(t);r(16),r(7),r(17),r(18),r(20),r(25),r(27),r(29),r(31);var n=r(4),a=r(8),u=r(14),i=r(12),o={"/":a.a,"/home":a.a,"/favorite":u.a,"/detail/:id":i.a},c={init:function(e){var t=this,r=e.button,n=e.drawer,a=e.content;r.addEventListener("click",(function(e){t._toggleDrawer(e,n)})),a.addEventListener("click",(function(e){t._closeDrawe(e,n)}))},_toggleDrawer:function(e,t){e.stopPropagation(),t.classList.toggle("open")},_closeDrawe:function(e,t){e.stopPropagation(),t.classList.remove("open")}};function s(e,t,r,n,a,u,i){try{var o=e[u](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(t){var r=t.button,n=t.drawer,a=t.content;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._button=r,this._drawer=n,this._content=a,this._initAppShell()}var t,r,a,u,i;return t=e,(r=[{key:"_initAppShell",value:function(){c.init({button:this._button,drawer:this._drawer,content:this._content})}},{key:"renderPage",value:(u=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.a.parserActiveUrlWithCombiner(),r=o[t],e.next=4,r.render();case 4:return this._content.innerHTML=e.sent,e.next=7,r.afterRender();case 7:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=u.apply(e,t);function i(e){s(a,r,n,i,o,"next",e)}function o(e){s(a,r,n,i,o,"throw",e)}i(void 0)}))},function(){return i.apply(this,arguments)})}])&&f(t.prototype,r),a&&f(t,a),e}();function l(e,t,r,n,a,u,i){try{var o=e[u](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}(function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(e){console.log("SW registered: ",e)})).catch((function(e){console.log("Service worker not supported in this browser",e)}))}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function i(e){l(u,n,a,i,o,"next",e)}function o(e){l(u,n,a,i,o,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}})()();var p=new v({button:document.querySelector("#drawer"),drawer:document.querySelector("#mobile-navigasi"),content:document.querySelector("#main-content")});window.addEventListener("hashchange",(function(){p.renderPage()})),window.addEventListener("load",(function(){p.renderPage()}))},4:function(e,t,r){"use strict";var n={parserActiveUrlWithCombiner:function(){var e=window.location.hash.slice(1).toLowerCase(),t=this._urlSplitter(e);return this._urlCombiner(t)},parserActiveUrlWithoutCombiner:function(){var e=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(e)},_urlSplitter:function(e){var t=e.split("/");return{resource:t[1]||null,id:t[2]||null,verb:t[3]||null}},_urlCombiner:function(e){return(e.resource?"/".concat(e.resource):"/")+(e.id?"/:id":"")+(e.verb?"/".concat(e.verb):"")}};t.a=n},5:function(e,t,r){"use strict";var n=r(15),a=r(0);function u(e,t,r,n,a,u,i){try{var o=e[u](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){u(i,n,a,o,c,"next",e)}function c(e){u(i,n,a,o,c,"throw",e)}o(void 0)}))}}var o=a.a.DATABASE_NAME,c=a.a.DATABASE_VERSION,s=a.a.OBJECT_STORE_NAME,f=Object(n.a)(o,c,{upgrade:function(e){e.createObjectStore(s,{keyPath:"id"})}}),v={getRestaurant:function(e){return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f;case 4:return t.abrupt("return",t.sent.get(s,e));case 5:case"end":return t.stop()}}),t)})))()},getAllRestaurants:function(){return i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:return e.abrupt("return",e.sent.getAll(s));case 3:case"end":return e.stop()}}),e)})))()},putRestaurant:function(e){return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.hasOwnProperty("id")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f;case 4:return t.abrupt("return",t.sent.put(s,e));case 5:case"end":return t.stop()}}),t)})))()},deleteRestaurant:function(e){return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f;case 2:return t.abrupt("return",t.sent.delete(s,e));case 3:case"end":return t.stop()}}),t)})))()}};t.a=v}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nbG9iYWxzL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy91dGlscy9saWtlLWJ1dHRvbi1wcmVzZW50ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3B1YmxpYy9oZXJvL2hlcm8tbGFyZ2UuanBnIiwid2VicGFjazovLy8uL3NyYy9wdWJsaWMvaGVyby9oZXJvLXNtYWxsLmpwZyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9nbG9iYWxzL2FwaS1lbmRwb2ludC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9kYXRhL2NhdGFsb2ctZGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9yb3V0ZXMvcm91dGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL3V0aWxzL2RyYXdlci1pbml0aWF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvdmlld3MvQXBwLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL3V0aWxzL3N3UmVnaXN0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvcm91dGVzL3VybC1wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvZGF0YS9mYXZvcml0ZS1yZXN0YXVyYW50cy1pZGIuanMiXSwibmFtZXMiOlsiQ09ORklHIiwiQkFTRV9VUkwiLCJCQVNFX0lNQUdFX1VSTCIsIkFQSV9LRVkiLCJEQVRBQkFTRV9OQU1FIiwiREFUQUJBU0VfVkVSU0lPTiIsIk9CSkVDVF9TVE9SRV9OQU1FIiwibGlrZUJ1dHRvbkluaXRpYXRvciIsImluaXQiLCJsaWtlQnV0dG9uQ29udGFpbmVyIiwiZmF2b3JpdGVSZXN0YXVyYW50cyIsInJlc3RhdXJhbnQiLCJfbGlrZUJ1dHRvbkNvbnRhaW5lciIsIl9yZXN0YXVyYW50IiwiX2Zhdm9yaXRlUmVzdGF1cmFudHMiLCJfcmVuZGVyQnV0dG9uIiwiaWQiLCJfaXNSZXN0YXVyYW50RXhpc3QiLCJfcmVuZGVyTGlrZWQiLCJfcmVuZGVyTGlrZSIsImdldFJlc3RhdXJhbnQiLCJ0aGlzIiwiaW5uZXJIVE1MIiwiY3JlYXRlVW5saWtSZXN0YXVyYW50QnV0dG9uVGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVsZXRlUmVzdGF1cmFudCIsImNyZWF0ZUxpa2VSZXN0YXVyYW50QnV0dG9uVGVtcGxhdGUiLCJwdXRSZXN0YXVyYW50IiwiQVBJX0VORFBPSU5UIiwiTElTVCIsIkRFVEFJTCIsIlJFVklFVyIsIkNhdGFsb2dEYXRhIiwiZmV0Y2giLCJyZXNwb25zZSIsImpzb24iLCJyZXNwb25zZUpzb24iLCJyZXN0YXVyYW50cyIsIm5hbWUiLCJyZXZpZXciLCJkYXRhIiwib3B0aW9uIiwibWV0aG9kIiwiaGVhZGVyIiwiYm9keSIsIlVSTFNlYXJjaFBhcmFtcyIsInJvdXRlcyIsIkhvbWUiLCJGYXZvcml0ZSIsIkRldGFpbCIsIkRyYXdlckluaXRpYXRvciIsImJ1dHRvbiIsImRyYXdlciIsImNvbnRlbnQiLCJldmVudCIsIl90b2dnbGVEcmF3ZXIiLCJfY2xvc2VEcmF3ZSIsInN0b3BQcm9wYWdhdGlvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsIkFwcCIsIl9idXR0b24iLCJfZHJhd2VyIiwiX2NvbnRlbnQiLCJfaW5pdEFwcFNoZWxsIiwidXJsIiwiVXJsUGFyc2VyIiwicGFyc2VyQWN0aXZlVXJsV2l0aENvbWJpbmVyIiwicGFnZSIsInJlbmRlciIsImFmdGVyUmVuZGVyIiwibmF2aWdhdG9yIiwid2luZG93Iiwic2VydmljZVdvcmtlciIsInJlZ2lzdGVyIiwidGhlbiIsInJlZ2lzdHJhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJyZWdpc3RyYXRpb25FcnJvciIsInN3UmVnaXN0ZXIiLCJhcHAiLCJyZW5kZXJQYWdlIiwibG9jYXRpb24iLCJoYXNoIiwic2xpY2UiLCJ0b0xvd2VyQ2FzZSIsInNwbGl0ZWRVcmwiLCJfdXJsU3BsaXR0ZXIiLCJfdXJsQ29tYmluZXIiLCJwYXJzZXJBY3RpdmVVcmxXaXRob3V0Q29tYmluZXIiLCJ1cmxTcGxpdHMiLCJzcGxpdCIsInJlc291cmNlIiwidmVyYiIsImRiUHJvbWlzZSIsIm9wZW5EQiIsInVwZ3JhZGUiLCJkYXRhYmFzZSIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsIkZhdm9yaXRlUmVzdGF1cmFudElkYiIsImdldCIsImdldEFsbFJlc3RhdXJhbnRzIiwiZ2V0QWxsIiwiaGFzT3duUHJvcGVydHkiLCJwdXQiXSwibWFwcGluZ3MiOiJ3RkFTZUEsSUFUQSxDQUNiQyxTQUFVLHNDQUNWQyxlQUFnQixtREFDaEJDLFFBQVMsUUFDVEMsY0FBZSxnQ0FDZkMsaUJBQWtCLEVBQ2xCQyxrQkFBbUIsZ0IsdVdDSnJCLElBQU1DLEVBQXNCLENBQ3BCQyxLQURvQixZQUMyQywySkFBeERDLEVBQXdELEVBQXhEQSxvQkFBcUJDLEVBQW1DLEVBQW5DQSxvQkFBcUJDLEVBQWMsRUFBZEEsV0FDckQsRUFBS0MscUJBQXVCSCxFQUM1QixFQUFLSSxZQUFjRixFQUNuQixFQUFLRyxxQkFBdUJKLEVBSHVDLFNBSTdELEVBQUtLLGdCQUp3RCw4Q0FPL0RBLGNBUm9CLFdBUUosdUpBQ1pDLEVBQU8sRUFBS0gsWUFBWkcsR0FEWSxTQUdWLEVBQUtDLG1CQUFtQkQsR0FIZCxrQ0FJbEIsRUFBS0UsZUFKYSxzQkFNbEIsRUFBS0MsY0FOYSw4Q0FVaEJGLG1CQWxCb0IsU0FrQkRELEdBQUksZ0tBQ0YsRUFBS0YscUJBQXFCTSxjQUFjSixHQUR0QyxjQUNyQkwsRUFEcUIsMkJBRWxCQSxHQUZrQiw4Q0FLN0JPLGFBdkIwQixXQXVCWCxXQUNiRyxLQUFLVCxxQkFBcUJVLFVBQVlDLGdEQUVuQkMsU0FBU0MsY0FBYyxlQUMvQkMsaUJBQWlCLFFBQTVCLDJCQUFxQyw2R0FDN0IsRUFBS1oscUJBQXFCYSxpQkFBaUIsRUFB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LEVBQXdCLENBQ3RCcEYsY0FEc0IsU0FDUkosR0FBSSxrSUFDakJBLEVBRGlCLGlFQUtSa0YsRUFMUSx1Q0FLR08sSUFBSW5HLEVBQW1CVSxJQUwxQiw4Q0FPbEIwRixrQkFSc0IsV0FRRiwrSUFDVlIsRUFEVSx1Q0FDQ1MsT0FBT3JHLElBRFIsOENBR3BCdUIsY0FYc0IsU0FXUmxCLEdBQVksa0lBQ3pCQSxFQUFXaUcsZUFBZSxNQURELGlFQUtoQlYsRUFMZ0IsdUNBS0xXLElBQUl2RyxFQUFtQkssSUFMbEIsOENBTzFCZ0IsaUJBbEJzQixTQWtCTFgsR0FBSSwrSUFDWGtGLEVBRFcsOENBQ081RixFQUFtQlUsSUFEMUIsK0NBS2R3RiIsImZpbGUiOiI0LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENPTkZJRyA9IHtcbiAgQkFTRV9VUkw6ICdodHRwczovL3Jlc3RhdXJhbnQtYXBpLmRpY29kaW5nLmRldicsXG4gIEJBU0VfSU1BR0VfVVJMOiAnaHR0cHM6Ly9yZXN0YXVyYW50LWFwaS5kaWNvZGluZy5kZXYvaW1hZ2VzL3NtYWxsJyxcbiAgQVBJX0tFWTogJzEyMzQ1JyxcbiAgREFUQUJBU0VfTkFNRTogJ3Jlc3RhdXJhbnQtY2F0YWxvZ3VlLWRhdGFiYXNlJyxcbiAgREFUQUJBU0VfVkVSU0lPTjogMSxcbiAgT0JKRUNUX1NUT1JFX05BTUU6ICdyZXN0YXVyYW50cycsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBDT05GSUc7XG4iLCJpbXBvcnQgeyBjcmVhdGVMaWtlUmVzdGF1cmFudEJ1dHRvblRlbXBsYXRlLCBjcmVhdGVVbmxpa1Jlc3RhdXJhbnRCdXR0b25UZW1wbGF0ZSB9IGZyb20gJy4uL3ZpZXdzL3RlbXBsYXRlcy90ZW1wbGF0ZS1jcmVhdG9yJztcblxuY29uc3QgbGlrZUJ1dHRvbkluaXRpYXRvciA9IHtcbiAgYXN5bmMgaW5pdCh7IGxpa2VCdXR0b25Db250YWluZXIsIGZhdm9yaXRlUmVzdGF1cmFudHMsIHJlc3RhdXJhbnQgfSkge1xuICAgIHRoaXMuX2xpa2VCdXR0b25Db250YWluZXIgPSBsaWtlQnV0dG9uQ29udGFpbmVyO1xuICAgIHRoaXMuX3Jlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xuICAgIHRoaXMuX2Zhdm9yaXRlUmVzdGF1cmFudHMgPSBmYXZvcml0ZVJlc3RhdXJhbnRzO1xuICAgIGF3YWl0IHRoaXMuX3JlbmRlckJ1dHRvbigpO1xuICB9LFxuXG4gIGFzeW5jIF9yZW5kZXJCdXR0b24oKSB7XG4gICAgY29uc3QgeyBpZCB9ID0gdGhpcy5fcmVzdGF1cmFudDtcblxuICAgIGlmIChhd2FpdCB0aGlzLl9pc1Jlc3RhdXJhbnRFeGlzdChpZCkpIHtcbiAgICAgIHRoaXMuX3JlbmRlckxpa2VkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlbmRlckxpa2UoKTtcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgX2lzUmVzdGF1cmFudEV4aXN0KGlkKSB7XG4gICAgY29uc3QgcmVzdGF1cmFudCA9IGF3YWl0IHRoaXMuX2Zhdm9yaXRlUmVzdGF1cmFudHMuZ2V0UmVzdGF1cmFudChpZCk7XG4gICAgcmV0dXJuICEhcmVzdGF1cmFudDtcbiAgfSxcblxuICBfcmVuZGVyTGlrZWQoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbkNvbnRhaW5lci5pbm5lckhUTUwgPSBjcmVhdGVVbmxpa1Jlc3RhdXJhbnRCdXR0b25UZW1wbGF0ZSgpO1xuXG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaWtlQnV0dG9uJyk7XG4gICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuX2Zhdm9yaXRlUmVzdGF1cmFudHMuZGVsZXRlUmVzdGF1cmFudCh0aGlzLl9yZXN0YXVyYW50LmlkKTtcbiAgICAgIHRoaXMuX3JlbmRlckJ1dHRvbigpO1xuICAgIH0pO1xuICB9LFxuXG4gIF9yZW5kZXJMaWtlKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b25Db250YWluZXIuaW5uZXJIVE1MID0gY3JlYXRlTGlrZVJlc3RhdXJhbnRCdXR0b25UZW1wbGF0ZSgpO1xuICAgIGNvbnN0IGxpa2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlrZUJ1dHRvbicpO1xuICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLl9mYXZvcml0ZVJlc3RhdXJhbnRzLnB1dFJlc3RhdXJhbnQodGhpcy5fcmVzdGF1cmFudCk7XG4gICAgICB0aGlzLl9yZW5kZXJCdXR0b24oKTtcbiAgICB9KTtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGxpa2VCdXR0b25Jbml0aWF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMzk3MDUwZjg5MDlhZWE2MmRkOThjMDliMmNkNGY5MjQuanBnXCI7IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjQ0MWU1YTNlMDk2YTI0OGM2NjIyYTJlNjdkMWY4ZGIwLmpwZ1wiOyIsImltcG9ydCBDT05GSUcgZnJvbSAnLi9jb25maWcnO1xuXG5jb25zdCBBUElfRU5EUE9JTlQgPSB7XG4gIExJU1Q6IGAke0NPTkZJRy5CQVNFX1VSTH0vbGlzdGAsXG4gIERFVEFJTDogKGlkKSA9PiBgJHtDT05GSUcuQkFTRV9VUkx9L2RldGFpbC8ke2lkfWAsXG4gIFJFVklFVzogYCR7Q09ORklHLkJBU0VfVVJMfS9yZXZpZXdgLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgQVBJX0VORFBPSU5UO1xuIiwiaW1wb3J0IEFQSV9FTkRQT0lOVCBmcm9tICcuLi9nbG9iYWxzL2FwaS1lbmRwb2ludCc7XG5pbXBvcnQgQ09ORklHIGZyb20gJy4uL2dsb2JhbHMvY29uZmlnJztcblxuY2xhc3MgQ2F0YWxvZ0RhdGEge1xuICBzdGF0aWMgYXN5bmMgZ2V0TGlzdENhdGFsb2coKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChBUElfRU5EUE9JTlQuTElTVCk7XG4gICAgY29uc3QgcmVzcG9uc2VKc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXNwb25zZUpzb24ucmVzdGF1cmFudHM7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0RGV0YWlsQ2F0YWxvZyhpZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goQVBJX0VORFBPSU5ULkRFVEFJTChpZCkpO1xuICAgIGNvbnN0IHJlc3BvbnNlSnNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzcG9uc2VKc29uLnJlc3RhdXJhbnQ7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYWRkUmV2aWV3ZXIoeyBpZCwgbmFtZSwgcmV2aWV3IH0pIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgaWQsXG4gICAgICBuYW1lLFxuICAgICAgcmV2aWV3LFxuICAgIH07XG5cbiAgICBjb25zdCBvcHRpb24gPSB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcjoge1xuICAgICAgICAnWC1BdXRoLVRva2VuJzogQ09ORklHLkFQSV9LRVksXG4gICAgICB9LFxuICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyhkYXRhKSxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChBUElfRU5EUE9JTlQuUkVWSUVXLCBvcHRpb24pO1xuICAgIGNvbnN0IHJlc3BvbnNlSnNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzcG9uc2VKc29uO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhdGFsb2dEYXRhO1xuIiwiaW1wb3J0IEhvbWUgZnJvbSAnLi4vdmlld3MvcGFnZXMvaG9tZSc7XG5pbXBvcnQgRmF2b3JpdGUgZnJvbSAnLi4vdmlld3MvcGFnZXMvZmF2b3JpdGUnO1xuaW1wb3J0IERldGFpbCBmcm9tICcuLi92aWV3cy9wYWdlcy9kZXRhaWwnO1xuXG5jb25zdCByb3V0ZXMgPSB7XG4gICcvJzogSG9tZSxcbiAgJy9ob21lJzogSG9tZSxcbiAgJy9mYXZvcml0ZSc6IEZhdm9yaXRlLFxuICAnL2RldGFpbC86aWQnOiBEZXRhaWwsXG59O1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XG4iLCJjb25zdCBEcmF3ZXJJbml0aWF0b3IgPSB7XG4gIGluaXQoeyBidXR0b24sIGRyYXdlciwgY29udGVudCB9KSB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl90b2dnbGVEcmF3ZXIoZXZlbnQsIGRyYXdlcik7XG4gICAgfSk7XG5cbiAgICBjb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9jbG9zZURyYXdlKGV2ZW50LCBkcmF3ZXIpO1xuICAgIH0pO1xuICB9LFxuXG4gIF90b2dnbGVEcmF3ZXIoZXZlbnQsIGRyYXdlcikge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGRyYXdlci5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gIH0sXG5cbiAgX2Nsb3NlRHJhd2UoZXZlbnQsIGRyYXdlcikge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGRyYXdlci5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBEcmF3ZXJJbml0aWF0b3I7XG4iLCJpbXBvcnQgVXJsUGFyc2VyIGZyb20gJy4uL3JvdXRlcy91cmwtcGFyc2VyJztcbmltcG9ydCByb3V0ZXMgZnJvbSAnLi4vcm91dGVzL3JvdXRlcyc7XG5pbXBvcnQgRHJhd2VySW5pdGlhdG9yIGZyb20gJy4uL3V0aWxzL2RyYXdlci1pbml0aWF0b3InO1xuXG5jbGFzcyBBcHAge1xuICBjb25zdHJ1Y3Rvcih7IGJ1dHRvbiwgZHJhd2VyLCBjb250ZW50IH0pIHtcbiAgICB0aGlzLl9idXR0b24gPSBidXR0b247XG4gICAgdGhpcy5fZHJhd2VyID0gZHJhd2VyO1xuICAgIHRoaXMuX2NvbnRlbnQgPSBjb250ZW50O1xuICAgIHRoaXMuX2luaXRBcHBTaGVsbCgpO1xuICB9XG5cbiAgX2luaXRBcHBTaGVsbCgpIHtcbiAgICBEcmF3ZXJJbml0aWF0b3IuaW5pdCh7XG4gICAgICBidXR0b246IHRoaXMuX2J1dHRvbixcbiAgICAgIGRyYXdlcjogdGhpcy5fZHJhd2VyLFxuICAgICAgY29udGVudDogdGhpcy5fY29udGVudCxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlclBhZ2UoKSB7XG4gICAgY29uc3QgdXJsID0gVXJsUGFyc2VyLnBhcnNlckFjdGl2ZVVybFdpdGhDb21iaW5lcigpO1xuICAgIGNvbnN0IHBhZ2UgPSByb3V0ZXNbdXJsXTtcbiAgICB0aGlzLl9jb250ZW50LmlubmVySFRNTCA9IGF3YWl0IHBhZ2UucmVuZGVyKCk7XG4gICAgYXdhaXQgcGFnZS5hZnRlclJlbmRlcigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcDtcbiIsImNvbnN0IHN3UmVnaXN0ZXIgPSBhc3luYyAoKSA9PiB7XG4gIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3NlcnZpY2Utd29ya2VyLmpzJykudGhlbigocmVnaXN0cmF0aW9uKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTVyByZWdpc3RlcmVkOiAnLCByZWdpc3RyYXRpb24pO1xuICAgICAgfSkuY2F0Y2goKHJlZ2lzdHJhdGlvbkVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlIHdvcmtlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicsIHJlZ2lzdHJhdGlvbkVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBzd1JlZ2lzdGVyO1xuIiwiaW1wb3J0ICdyZWdlbmVyYXRvci1ydW50aW1lJztcbmltcG9ydCAnbGF6eXNpemVzJztcbmltcG9ydCAnbGF6eXNpemVzL3BsdWdpbnMvcGFyZW50LWZpdC9scy5wYXJlbnQtZml0JztcbmltcG9ydCAnLi4vc3R5bGVzL3N0eWxlLmNzcyc7XG5pbXBvcnQgJy4uL3N0eWxlcy9oZXJvLmNzcyc7XG5pbXBvcnQgJy4uL3N0eWxlcy9wb3N0LmNzcyc7XG5pbXBvcnQgJy4uL3N0eWxlcy9kZXRhaWwuY3NzJztcbmltcG9ydCAnLi4vc3R5bGVzL3Jlc3BvbnNpdmUuY3NzJztcbmltcG9ydCAnLi4vc3R5bGVzL3NrZWxldG9uLWNhcmQuY3NzJztcbmltcG9ydCBBcHAgZnJvbSAnLi92aWV3cy9BcHAnO1xuaW1wb3J0IHN3UmVnaXN0ZXIgZnJvbSAnLi91dGlscy9zd1JlZ2lzdGVyJztcblxuc3dSZWdpc3RlcigpO1xuY29uc3QgYXBwID0gbmV3IEFwcCh7XG4gIGJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RyYXdlcicpLFxuICBkcmF3ZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2JpbGUtbmF2aWdhc2knKSxcbiAgY29udGVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4tY29udGVudCcpLFxufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4ge1xuICBhcHAucmVuZGVyUGFnZSgpO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICBhcHAucmVuZGVyUGFnZSgpO1xufSk7XG4iLCJjb25zdCBVcmxQYXJzZXIgPSB7XG4gIHBhcnNlckFjdGl2ZVVybFdpdGhDb21iaW5lcigpIHtcbiAgICBjb25zdCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHNwbGl0ZWRVcmwgPSB0aGlzLl91cmxTcGxpdHRlcih1cmwpO1xuICAgIHJldHVybiB0aGlzLl91cmxDb21iaW5lcihzcGxpdGVkVXJsKTtcbiAgfSxcblxuICBwYXJzZXJBY3RpdmVVcmxXaXRob3V0Q29tYmluZXIoKSB7XG4gICAgY29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gdGhpcy5fdXJsU3BsaXR0ZXIodXJsKTtcbiAgfSxcblxuICBfdXJsU3BsaXR0ZXIodXJsKSB7XG4gICAgY29uc3QgdXJsU3BsaXRzID0gdXJsLnNwbGl0KCcvJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc291cmNlOiB1cmxTcGxpdHNbMV0gfHwgbnVsbCxcbiAgICAgIGlkOiB1cmxTcGxpdHNbMl0gfHwgbnVsbCxcbiAgICAgIHZlcmI6IHVybFNwbGl0c1szXSB8fCBudWxsLFxuICAgIH07XG4gIH0sXG5cbiAgX3VybENvbWJpbmVyKHNwbGl0ZWRVcmwpIHtcbiAgICByZXR1cm4gKHNwbGl0ZWRVcmwucmVzb3VyY2UgPyBgLyR7c3BsaXRlZFVybC5yZXNvdXJjZX1gIDogJy8nKVxuICAgICAgKyAoc3BsaXRlZFVybC5pZCA/ICcvOmlkJyA6ICcnKVxuICAgICAgKyAoc3BsaXRlZFVybC52ZXJiID8gYC8ke3NwbGl0ZWRVcmwudmVyYn1gIDogJycpO1xuICB9LFxuXG59O1xuXG5leHBvcnQgZGVmYXVsdCBVcmxQYXJzZXI7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90b3R5cGUtYnVpbHRpbnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIGNvbnNpc3RlbnQtcmV0dXJuICovXG5pbXBvcnQgeyBvcGVuREIgfSBmcm9tICdpZGInO1xuaW1wb3J0IENPTkZJRyBmcm9tICcuLi9nbG9iYWxzL2NvbmZpZyc7XG5cbmNvbnN0IHsgREFUQUJBU0VfTkFNRSwgREFUQUJBU0VfVkVSU0lPTiwgT0JKRUNUX1NUT1JFX05BTUUgfSA9IENPTkZJRztcblxuY29uc3QgZGJQcm9taXNlID0gb3BlbkRCKERBVEFCQVNFX05BTUUsIERBVEFCQVNFX1ZFUlNJT04sIHtcbiAgdXBncmFkZShkYXRhYmFzZSkge1xuICAgIGRhdGFiYXNlLmNyZWF0ZU9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FLCB7IGtleVBhdGg6ICdpZCcgfSk7XG4gIH0sXG59KTtcblxuY29uc3QgRmF2b3JpdGVSZXN0YXVyYW50SWRiID0ge1xuICBhc3luYyBnZXRSZXN0YXVyYW50KGlkKSB7XG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiAoYXdhaXQgZGJQcm9taXNlKS5nZXQoT0JKRUNUX1NUT1JFX05BTUUsIGlkKTtcbiAgfSxcbiAgYXN5bmMgZ2V0QWxsUmVzdGF1cmFudHMoKSB7XG4gICAgcmV0dXJuIChhd2FpdCBkYlByb21pc2UpLmdldEFsbChPQkpFQ1RfU1RPUkVfTkFNRSk7XG4gIH0sXG4gIGFzeW5jIHB1dFJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xuICAgIGlmICghcmVzdGF1cmFudC5oYXNPd25Qcm9wZXJ0eSgnaWQnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiAoYXdhaXQgZGJQcm9taXNlKS5wdXQoT0JKRUNUX1NUT1JFX05BTUUsIHJlc3RhdXJhbnQpO1xuICB9LFxuICBhc3luYyBkZWxldGVSZXN0YXVyYW50KGlkKSB7XG4gICAgcmV0dXJuIChhd2FpdCBkYlByb21pc2UpLmRlbGV0ZShPQkpFQ1RfU1RPUkVfTkFNRSwgaWQpO1xuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgRmF2b3JpdGVSZXN0YXVyYW50SWRiO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==